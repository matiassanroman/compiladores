.386
.model flat, stdcall
option casemap :none
include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\user32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\user32.lib
.data
mensaje db "Mensaje por pantalla", 0
errorOverflowSuma db "Ha ocurrido overflow al sumar, programa terminado inesperadamente", 0
errorDivisionCero db "Se intenta dividir por cero, programa terminado por su seguridad", 0
_MAX dt 604462909807314587353087
@aux1 dt ?
@aux2 dt ?
_25 dw 25
_2.1E+1 dt 2.1E+1
_3.250E+3 dt 3.250E+3
_1 dw 1
jj@Main dt ?
_20 dw 20
.code
overflow:
invoke MessageBox, NULL, addr errorOverflowSuma, addr mensaje, MB_OK 
call fin
divcero:
invoke MessageBox, NULL, addr errorDivisionCero, addr mensaje, MB_OK 
call fin
main:
MOV BX, 20
ADD BX, 1
CMP BX, 32767
JA overflow
MOV AX, jj@Main
CWDE
MOV BX, EAX
FLD 21.5
FCOMP jj@Main
FSTSW @aux1
MOV AX, @aux1
SAHF
JAE L15
JMP L19
L15:
MOV @aux2, jj@Main
MOV 3.250E+3, @aux2
L19:
fin: invoke ExitProcess, 0
end main
